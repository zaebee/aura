global:
  environment: local

# Fast tunnel
tunnel:
  image:
    repository: snowdreamtech/frpc
    tag: alpine3.22
    pullPolicy: IfNotPresent

# API Gateway Service Configuration
gateway:
  livenessProbe:
    path: /healthz
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 2
    failureThreshold: 3
  readinessProbe:
    path: /readyz
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 2
    failureThreshold: 3
  image:
    repository: ghcr.io/zaebee/aura-gateway # Docker image repository for the API Gateway
    tag: latest
    pullPolicy: Always # Image pull policy
  service:
    type: LoadBalancer # Service type to expose the API Gateway
    port: 8000
  replicaCount: 1
  resources:
    limits:
      cpu: 200m
      memory: 512Mi
  # CORS allowed origins (comma-separated list)
  corsOrigins: "https://aura.zae.life"
  env:
    LOG_LEVEL: info

# Core Service Configuration
core:
  livenessProbe:
    initialDelaySeconds: 5
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
  readinessProbe:
    initialDelaySeconds: 10
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
  image:
    repository: ghcr.io/zaebee/aura-core
    tag: latest
    pullPolicy: IfNotPresent
  service:
    port: 50051
  replicaCount: 1
  resources:
    limits:
      cpu: 200m
      memory: 1Gi
    requests:
      cpu: 100m
      memory: 128Mi
  env:
    AURA_SERVER__LOG_LEVEL: info
    AURA_LLM__MODEL: "mistral/mistral-large-latest"  # Can override: openai/gpt-4o, ollama/mistral, rule
    AURA_SERVER__PROMETHEUS_URL: "http://monitoring-kube-prometheus-prometheus.monitoring:9090"

# PostgreSQL Database Configuration
postgres:
  enabled: true
  image: pgvector/pgvector:pg15
  storage: 1Gi
  auth:
    username: user
    password: password
    database: aura_db

# Redis Configuration
redis:
  enabled: true
  image: redis:7-alpine

# Jaeger Configuration
jaeger:
  enabled: true
  service:
    type: LoadBalancer # Service type to expose Jaeger
  # Resource limits for Jaeger
  resources:
    limits:
      cpu: 500m
      memory: 512Mi

# Frontnend Configuration
frontend:
  image:
    repository: ghcr.io/zaebee/aura-frontend
    tag: latest
    pullPolicy: IfNotPresent
  service:
    type: LoadBalancer
    port: 3000
  replicaCount: 1
  resources:
    limits:
      cpu: 200m
      memory: 256Mi
  apiGatewayUrl: "https://api.aura.zae.life/v1"
  env:
    LOG_LEVEL: info

# Telegram Bot Service Configuration
telegram:
  image:
    repository: ghcr.io/zaebee/aura-telegram-bot
    tag: latest
    pullPolicy: IfNotPresent
  replicaCount: 1
  resources:
    limits:
      cpu: 100m
      memory: 128Mi
    requests:
      cpu: 50m
      memory: 64Mi
  env:
    LOG_LEVEL: info

# Secrets for the application.
# For production, it is strongly recommended to use a secret management solution
# like Vault or External Secrets Operator instead of providing plain-text secrets here.
secrets:
  # API key for Mistral AI, required by the core service.
  # This value must be provided during installation via CI/CD.
  # Injected via: --set secrets.mistralApiKey="your-key"
  mistralApiKey: ""
  # Telegram Bot Token, required by the telegram bot service.
  # This value must be provided during installation via CI/CD.
  # Injected via: --set secrets.telegramToken="your-token"
  telegramToken: ""
  # API key for OpenAI (optional, only if using openai/* models)
  # Injected via: --set secrets.openaiApiKey="your-key"
  openaiApiKey: ""
  # Image pull secrets for private container registries
  imagePullSecrets:
  - name: ghcr-secret
  # FRP client authentication token for tunnel access
  # This value must be provided during installation via:
  # helm install --set secrets.frpClientToken.value="your-token-here"
  frpClientToken:
    name: frp-client-token
    value: ""  # Must be set during deployment
